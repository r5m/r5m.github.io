<!DOCTYPE HTML>
<html manifest="finance.appcache?update">
    <head>
        <meta charset="utf-8" />
        <!-- please don't scale, browser ! -->
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no, maximum-scale=1.0, width=device-width">
		
		<!-- this IS a web app -->
		<meta name="mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<title>R5M Finance :: Free mobile cross-platform Finance Manager</title>
		<script>
			console.log(window.location.toString())
			if(window.location.protocol == "http:" && (window.location.toString().indexOf('localhost')== -1 ) )
				window.location.assign(window.location.toString().replace('http','https'))
			//console.log(window.location.protocol)
		</script>
		<link rel="stylesheet" href="css/loader.css" />
        <link rel="shortcut icon"	 href="icons/ic_launcher.png" />
		<link rel="apple-touch-icon" href="icons/ic_launcher.png" />
		<link rel="nokia-touch.icon" href="icons/ic_launcher.png" />
		
		<!-- layout & theme-->
		<link rel="stylesheet" type="text/css" href="js/finance-release/dojox/mobile/themes/ios7/ios7.css"/>
        <link rel="stylesheet" type="text/css" href="icons/font-awesome-4.1.0/css/font-awesome.min.css"/>
		
		<link rel="stylesheet" href="css/main.css" /> 
		<link rel="stylesheet" href="css/columnlayout.css" />
        <link href="js/finance-release/dojox/mobile/themes/common/domButtons.css" rel="stylesheet">
        
        <!--<script src="js/finance-release/dojox/mobile/deviceTheme.js">â€¨</script>-->
        
        <!-- IndexedDb over WebSQL -->
        <script type="text/javascript" src="js/etc/IndexedDBShim.min.js"></script>
        <!--<script type="text/javascript" src="js/etc/fastclick.js"></script>-->
        
        <!-- App config -->
        <script src="js/etc/appcache.js"></script>
	    <script src="js/etc/money.js"></script>
	    <script src="js/AppConfig.js"></script>
        <script src="currencies.js"></script>
	    <script src="rates.js"></script>
       
        <script src="js/etc/dropbox-datastores-1.1.0.js" type="text/javascript"></script>
        <script>
			var client = new Dropbox.Client({key: 'ghd8zs8czdf1uou'});
			window.AppData.client = client;
			// Try to finish OAuth authorization.
					
			client.authenticate({interactive: false}, function (error) {
				if (error) {
					console.log(error)
					//	alert('Authentication error: ' + error);
				}
			});
			console.log(client.isAuthenticated())
					
			if (client.isAuthenticated()) {
				// Client is authenticated. Display UI.
				console.log('Done')
			}</script>
	</head>
	<body id="page-body">
		<!-- this is splash screen -->
		<h1 id="main-progress-bar" class="loader">
			<div class="loader-text">
				<p>R5M Finance</p>
				<p class="state">Initializing application...</p>
			</div>
		</h1>
		<div id="customPicker" class="overlay">
			<div id="numberPicker"></div>
		</div>
		<!--<div id="splash" style="display:block; z-index:10; opacity:1; position:fixed; top:0;left:0;width:100%;height:100%;background:white"><div class="splash"><i class="app-loader fa fa-refresh fa-spin" style="font-size: 2em;"></i><p style="font-weight:bold">loading</p></div></div>-->
		<script src="js/finance-release/dojo/dojo.js"></script>
		<!--<script type="text/javascript" charset="utf-8" src="phonegap.js"></script>-->
		<script type="text/javascript" charset="utf-8">
			//function to start app
			function init(){
				require(["money/money-app"],function(){
					require(["money/Application"]);
				})
			}
			
			//wait for phonegap if Android/iPhone
			//...or simply start app if not
			//if(navigator.userAgent.match(/(iPhone|iPod|iPad|Android)/)) {
			//	document.addEventListener("deviceready", init, false);
			//}else {
				init();
			//}
		</script>
		
	</body>
</html>
